<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uki's Dive Tools</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="overlay"></div>

    <div class="calculator">
        
        <h1>Uki's Dive Tools</h1>

        <div class="theme-switch-wrapper">
            <label class="theme-switch" for="theme-toggle">
                <input type="checkbox" id="theme-toggle" />
                <span class="slider round"></span>
            </label>
            <label for="theme-toggle" class="theme-label">Tryb Ciemny</label>
        </div>

        <nav class="tab-nav">
            <button class="tab-button active" data-tab="sac-calculator">
                Kalkulator SAC
            </button>
            <button class="tab-button" data-tab="nitrox-calculator">
                Kalkulator Nitrox
            </button>
            <button class="tab-button" data-tab="gas-planning-calculator">
                Planowanie Gazu
            </button>
        </nav>
        
        <div class="tab-content-wrapper">
            <div id="sac-calculator" class="tab-content active-tab">
                <form id="sacForm">
                    <div class="input-group">
                        <label for="p1">Ciśnienie startowe (bar)</label>
                        <input type="number" id="p1" required>
                    </div>
                    <div class="input-group">
                        <label for="p2">Ciśnienie końcowe (bar)</label>
                        <input type="number" id="p2" required>
                    </div>
                    <div class="input-group">
                        <label for="vb">Pojemność butli (l)</label>
                        <input type="number" id="vb" value="11" required>
                    </div>
                    <div class="input-group">
                        <label for="depth">Średnia głębokość (m)</label>
                        <input type="number" id="depth" required>
                    </div>
                    <div class="input-group">
                        <label for="time">Czas pomiaru (min)</label>
                        <input type="number" id="time" required>
                    </div>
                    <div class="input-group">
                        <label for="waterType">Rodaj wody</label>
                        <select id="waterType">
                            <option value="salt">Woda słona</option>
                            <option value="fresh">Woda słodka</option>
                        </select>
                    </div>
                    
                    <div class="button-with-tooltip">
                        <button type="submit">Oblicz SAC</button>
                        <span class="tooltip-trigger tooltip-button">
                              ?
                              <div class="tooltip-content">
                                <h4>SAC (Surface Air Consumption)</h4>
                                <p><strong>Co to jest?</strong> SAC to skrót od angielskiego terminu Surface Air Consumption, co po polsku oznacza powierzchniowe zużycie gazu.</p>
                                <p><strong>Po co to liczymy?</strong> Jest to podstawowy i niezbędny parametr używany do obliczania zapasu powietrza na nurkowanie.</p>
                                <p><strong>Definicja:</strong> SAC to ilość gazu (pod ciśnieniem atmosferycznym, wyrażona w litrach) zużywana przez nurka podczas oddychania w ciągu jednej minuty na powierzchni.</p>
                              </div>
                        </span>
                    </div>
                </form>
                <div id="result" class="result-container"></div>
            </div>

            <div id="nitrox-calculator" class="tab-content">
                
                <div class="input-group">
                    <label for="nitroxO2">Procent tlenu (O₂%)</label>
                    <input type="number" id="nitroxO2" value="32" min="21" max="100" required>
                </div>

                <nav class="sub-tab-nav">
                    <button class="sub-tab-button active" data-subtab="mod-calculator" title="Oblicza maksymalną głębokość">
                        Oblicz MOD
                    </button>
                    <button class="sub-tab-button" data-subtab="ead-calculator" title="Oblicza równoważną głębokość powietrzną">
                        Oblicz EAD
                    </button>
                </nav>

                <div class="sub-tab-content-wrapper">
                    <div id="mod-calculator" class="sub-tab-content active-sub-tab">
                        <form id="modForm">
                            
                            <div class="input-group">
                                <div class="label-with-tooltip">
                                    <label for="modPO2">Ciśnienie parcjalne (PPO₂)</label>
                                    <span class="tooltip-trigger">
                                          ?
                                          <div class="tooltip-content">
                                            <h4>PPO₂ (Ciśnienie Parcjalne Tlenu)</h4>
                                            <p><strong>Co to jest?</strong> To faktyczna "dawka" tlenu, którą przyjmuje organizm pod wodą. Im głębiej, tym dawka jest wyższa.</p>
                                            <p><strong>Dlaczego to limit?</strong> Zbyt wysoka dawka tlenu staje się toksyczna dla układu nerwowego (CNS), co grozi utratą przytomności i konwulsjami tlenowymi.</p>
                                            <p><strong>Zalecane Limity w kalkulatorze (MOD):</strong></p>
                                            <ul>
                                                <li><strong>1,4 bar/ATA (Zalecane):</strong> Jest to bezpieczny limit dla nurkowań dennych/rekreacyjnych. Zapewnia dodatkowy margines bezpieczeństwa i pozwala na dłuższą ekspozycję (do 150 minut).</li>
                                                <li><strong>1,6 bar/ATA (Maksymalny Limit):</strong> To nieprzekraczalna granica bezpieczeństwa. Używany jest zwykle tylko do przystanków dekompresyjnych. Przy tym ciśnieniu maksymalny czas ekspozycji to zaledwie 45 minut.</li>
                                            </ul>
                                          </div>
                                    </span>
                                </div>
                                <input type="number" id="modPO2" value="1.4" step="0.1" min="1.0" max="1.6" required>
                                <p id="ppo2-warning" class="warning-text"></p>
                            </div>

                            <button type="submit">Oblicz MOD</button>
                        </form>
                        <div id="modResult" class="result-container"></div>
                    </div>

                    <div id="ead-calculator" class="sub-tab-content">
                        <form id="eadForm">
                            
                            <div class="input-group">
                                <label for="eadDepth">Planowana głębokość (m)</label>
                                <input type="number" id="eadDepth" min="1" required>
                            </div>
                            <div class="button-with-tooltip">
                                <button type="submit">Oblicz EAD</button>
                                <span class="tooltip-trigger tooltip-button">
                                    ?
                                    <div class="tooltip-content">
                                        <h4>Równoważna Głębokość Powietrzna (EAD)</h4>
                                        <p><strong>Co to jest?</strong> To hipotetyczna, płytsza głębokość, na której nurkowanie z użyciem powietrza (21% tlenu) spowodowałoby takie samo nasycenie organizmu azotem jak nurkowanie na rzeczywistej głębokości z użyciem Twojej mieszanki Nitrox.</p>
                                        <p><strong>Dlaczego to liczymy?</strong> Ponieważ Nitrox zawiera mniej azotu niż powietrze, EAD jest zawsze mniejsze niż faktyczna głębokość. Używamy tej płytszej wartości EAD w standardowych (powietrznych) tabelach nurkowych, aby bezpiecznie wydłużyć czas, jaki możemy spędzić pod wodą bez dekompresji.</p>
                                        <p><strong>Pamiętaj:</strong> EAD dotyczy tylko azotu. Wciąż musisz przestrzegać Maksymalnej Głębokości Operacyjnej (MOD) narzuconej przez limit tlenu (PPO₂)!</p>
                                    </div>
                                </span>
                            </div>
                        </form>
                        <div id="eadResult" class="result-container"></div>
                    </div>
                </div>
            </div>
            
            <div id="gas-planning-calculator" class="tab-content">
                
                <nav class="sub-tab-nav">
                    <button class="sub-tab-button active" data-subtab="rb-calculator">
                        Oblicz Rock Bottom
                    </button>
                    <button class="sub-tab-button" data-subtab="consumption-calculator">
                        Oblicz Zużycie Gazu
                    </button>
                </nav>

                <div class="sub-tab-content-wrapper">
                    
                    <div id="rb-calculator" class="sub-tab-content active-sub-tab">
                        <h3>Kalkulator Rock Bottom (RB)</h3>
                        <form id="rbForm" class="two-column-form"> 
                            
                            <div class="form-column">
                                <div class="input-group">
                                    <label for="rbSAC">Twój SAC (l/min)</label>
                                    <input type="number" id="rbSAC" value="20" step="0.1" min="5" required>
                                </div>
                                <div class="input-group">
                                    <label for="rbDepth">Maksymalna Głębokość (m)</label>
                                    <input type="number" id="rbDepth" value="40" min="1" required>
                                </div>
                                <div class="input-group">
                                    <label for="rbVolume">Całkowita Pojemność Butli (l)</label>
                                    <input type="number" id="rbVolume" value="24" min="1" required title="Suma pojemności wszystkich butli z gazem dennym (np. 2x12=24)">
                                </div>
                                 <div class="input-group">
                                    <div class="label-with-tooltip">
                                        <label for="rbStopDepth">Głęb. Pierwszego Przystanku/Zmiany Gazu (m)</label> 
                                    </div>
                                    <input type="number" id="rbStopDepth" value="6" min="0" required>
                                </div>
                                 <div class="input-group">
                                    <label for="rbAscentRate">Prędkość Wynurzania (m/min)</label>
                                    <input type="number" id="rbAscentRate" value="10" min="1" max="18" required>
                                </div>
                            </div>

                            <div class="form-column">
                                 <div class="input-group">
                                     <div class="label-with-tooltip">
                                        <label for="rbStressFactor">Mnożnik SAC (Stres)</label>
                                    </div>
                                    <input type="number" id="rbStressFactor" value="2" step="0.1" min="1" max="3" required>
                                </div>
                                 <div class="input-group">
                                    <label for="rbDivers">Liczba Nurków</label>
                                    <input type="number" id="rbDivers" value="2" min="1" max="2" required title="Ilu nurków będzie oddychać z rezerwy (zwykle 2: Ty i partner)">
                                </div>
                                 <div class="input-group">
                                    <div class="label-with-tooltip">
                                        <label for="rbEmergencyTime">Czas Reakcji na Dnie (min)</label>
                                    </div>
                                    <input type="number" id="rbEmergencyTime" value="2" min="0" max="5" required>
                                </div>
                                <div class="input-group">
                                     <div class="label-with-tooltip">
                                        <label for="rbSafetyMargin">Dodatkowy Bufor (bar)</label>
                                    </div>
                                    <input type="number" id="rbSafetyMargin" value="10" min="0" required>
                                </div>
                            </div>
                            
                            <div class="form-full-width">
                                <div class="button-with-tooltip">
                                    <button type="submit">Oblicz Rock Bottom</button>
                                    <span class="tooltip-trigger tooltip-button">
                                          ?
                                          <div class="tooltip-content">
                                            <h4>Czym jest Rock Bottom?</h4>
                                            <p>Rock Bottom (RB) to zasada planowania rezerwy gazu. Jest to <strong>minimalna ilość gazu</strong>, którą musi posiadać nurek (lub zespół) w najgorszym możliwym scenariuszu awaryjnym (np. utrata gazu przez partnera na maksymalnej głębokości).</p>
                                            <p>Celem metody jest zapewnienie wystarczającej ilości gazu, aby zespół nurkowy mógł <strong>bezpiecznie zakończyć nurkowanie</strong>, realizując zaplanowany profil dekompresji (lub wynurzenie do przystanku ze zmianą gazu), uwzględniając jednocześnie czynnik stresu.</p>
                                            <p>Metoda RB jest przeznaczona do nurkowań głębokich i technicznych, gdzie tradycyjna "Reguła 50 BAR" się nie nadaje.</p>
                                          </div>
                                    </span>
                                </div>
                            </div>
                        </form>
                        <div id="rbResult" class="result-container"></div>
                    </div>

                    <div id="consumption-calculator" class="sub-tab-content">
                        <h3>Kalkulator Całkowitego Zużycia Gazu</h3>
                        <form id="gasConsumptionForm">
                            <div class="input-group">
                                <label for="gcSAC">Twój SAC (l/min)</label>
                                <input type="number" id="gcSAC" value="20" step="0.1" min="5" required>
                            </div>
                            <div class="input-group">
                                <label for="gcDepth">Maksymalna Głębokość (m)</label>
                                <input type="number" id="gcDepth" value="30" min="1" required>
                            </div>
                            <div class="input-group">
                                <label for="gcBottomTime">Planowany Czas Denny (min)</label>
                                <input type="number" id="gcBottomTime" value="20" min="1" required>
                            </div>
                            
                            <div class="two-column-form">
                                <div class="form-column">
                                    <div class="input-group">
                                        <label for="gcDescentRate">Prędkość Zanurzania (m/min)</label>
                                        <input type="number" id="gcDescentRate" value="15" min="1" required>
                                    </div>
                                    <div class="input-group">
                                        <label for="gcAscentRate">Prędkość Wynurzania (m/min)</label>
                                        <input type="number" id="gcAscentRate" value="10" min="1" max="18" required>
                                    </div>
                                    <div class="input-group">
                                        <label for="gcStopDepth">Głęb. Przystanku Bezp. (m)</label>
                                        <input type="number" id="gcStopDepth" value="5" min="0" required>
                                    </div>
                                </div>
                                <div class="form-column">
                                    <div class="input-group">
                                        <label for="gcStopTime">Czas Przystanku Bezp. (min)</label>
                                        <input type="number" id="gcStopTime" value="3" min="0" required>
                                    </div>
                                    <div class="input-group">
                                        <label for="gcTankSize">Pojemność Butli (l)</label>
                                        <input type="number" id="gcTankSize" value="12" min="1" required>
                                    </div>
                                    <div class="input-group">
                                        <label for="gcStartPressure">Ciśnienie początkowe (bar)</label>
                                        <input type="number" id="gcStartPressure" value="200" min="50" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="input-group">
                                <label for="gcReserve">Ciśnienie Rezerwy (bar)</label>
                                <input type="number" id="gcReserve" value="50" min="0" required>
                            </div>
                            <div class="input-group">
                                <label for="gcDivers">Liczba Nurków (do pomnożenia wyniku)</label>
                                <input type="number" id="gcDivers" value="1" min="1" max="10" required>
                            </div>
                            
                            <div class="button-with-tooltip">
                                <button type="submit">Oblicz Zużycie</button>
                                <span class="tooltip-trigger tooltip-button">
                                      ?
                                      <div class="tooltip-content">
                                        <h4>Planowanie Zużycia Gazu</h4>
                                        <p>Ten kalkulator pomoże Ci oszacować całkowite zużycie gazu na nurkowanie, uwzględniając różne fazy.</p>
                                        <p><strong>Fazy nurkowania:</strong></p>
                                        <ul>
                                            <li>Zanurzanie</li>
                                            <li>Czas denny</li>
                                            <li>Wynurzanie do przystanku</li>
                                            <li>Przystanek bezpieczeństwa</li>
                                            <li>Wynurzanie na powierzchnię</li>
                                        </ul>
                                        <p>Wynik jest podawany w litrach i wymaganym ciśnieniu w butli. Pamiętaj o dodaniu marginesu bezpieczeństwa!</p>
                                      </div>
                                </span>
                            </div>
                        </form>
                        <div id="gcResult" class="result-container"></div>
                    </div>
                </div>
            </div>

        </div>

        <a href="#" id="donation-link" class="donation-link">
            ☕ Podoba Ci się to narzędzie? Postaw mi kawę!
        </a>
    </div>

    <script src="script.js"></script>
</body>
</html>