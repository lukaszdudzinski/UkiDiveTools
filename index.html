<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uki's Dive Tools</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="game_styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles/lightbox.css">
    <link rel="icon" type="image/jpeg" href="img/logo.jpg">
    <link rel="apple-touch-icon" href="img/logo.jpg">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="DiveTools">
    <meta name="theme-color" content="#00d1b2">
</head>

<body>


    <div class="overlay"></div>

    <div class="app-wrapper">

        <div class="mobile-header">
            <button id="mobile-menu-toggle" aria-label="Otw√≥rz menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <img src="img/logo.jpg" alt="Logo" class="logo-img">
            <h2>Uki's Dive Tools</h2>
        </div>

        <nav class="sidebar-nav">
            <div class="sidebar-header" id="home-link-header" title="Powr√≥t do ekranu startowego">
                <img src="img/logo.jpg" alt="Logo" class="logo-img-desktop">
                <h1>Uki's Dive Tools</h1>
            </div>



            <ul>
                <li class="pro-menu-item"><a href="#" data-tab="pro-dashboard">Strefa PRO</a></li>
                <li><a href="#" data-tab="sac-calculator">Kalkulator SAC</a></li>
                <li><a href="#" data-tab="nitrox-calculator">Kalkulator Nitrox</a></li>
                <li><a href="#" data-tab="gas-planning-calculator">Planowanie Gazu (Basic)</a></li>
                <li><a href="#" data-tab="ballast-calculator">Kalkulator Balastu</a></li>
                <li><a href="#" data-tab="divemaster-tools">Narzƒôdzia Divemastera</a></li>
                <li><a href="#" data-tab="science-of-diving">Wiedza Nurkowa</a></li>
                <li class="game-menu-item"><a href="#" data-tab="river-dive-game"
                        style="color: #FFD700; font-weight: bold;">Uki's River Dive</a></li>
                <li><a href="#" data-tab="settings-panel">Ustawienia</a></li>
            </ul>

            <div class="sidebar-footer">
                <div class="donation-wrapper">
                    <a href="https://suppi.pl/ukidives" target="_blank" rel="noopener noreferrer" id="donation-link">
                        Podoba Ci siƒô to narzƒôdzie?
                        <strong>Postaw mi kawƒô!</strong>
                    </a>
                </div>
                <div class="emergency-wrapper" id="emergency-btn">
                    <a href="#">
                        üö® WYPADEK?
                        <strong>SOS / KOMORA</strong>
                    </a>
                </div>
                <div class="version-info" style="text-align: center; margin-top: 30px; color: #666; font-size: 0.8em;">
                    Loading Version...
                </div>
            </div>

        </nav>

        <main class="app-content">

            <h1 style="display: none;">Uki's Dive Tools</h1>
            <div class="theme-switch-wrapper" style="display: none;"></div>
            <nav class="tab-nav" style="display: none;"></nav>

            <div class="tab-content-wrapper">

                <div id="welcome-screen" class="tab-content active-tab">
                    <!-- Standard Header (Sidebar Mode) -->
                    <div class="home-header">
                        <img src="img/logo.jpg" alt="Logo" class="home-logo">
                        <h2>Uki's Dive Tools</h2>
                        <p>Wybierz narzƒôdzie z menu</p>
                    </div>

                    <!-- Dashboard Grid (Smart View: Hidden on Desktop, Visible on Mobile via CSS) -->
                    <div class="dashboard-grid">



                        <!-- Standard Tools -->
                        <div class="dashboard-card" onclick="switchTab('sac-calculator')">
                            <h4>Kalkulator SAC</h4>
                            <p>Zu≈ºycie gazu. Podstawa planowania.</p>
                        </div>
                        <div class="dashboard-card" onclick="switchTab('nitrox-calculator')">
                            <h4>Kalkulator Nitrox</h4>
                            <p>MOD, EAD, Best Mix, CNS %.</p>
                        </div>
                        <div class="dashboard-card" onclick="switchTab('gas-planning-calculator')">
                            <h4>Planowanie Gazu</h4>
                            <p>Symulacja zu≈ºycia i rezerwy.</p>
                        </div>
                        <div class="dashboard-card" onclick="switchTab('ballast-calculator')">
                            <h4>Kalkulator Balastu</h4>
                            <p>Dobierz o≈Ç√≥w do konfiguracji.</p>
                        </div>
                        <div class="dashboard-card" onclick="switchTab('divemaster-tools')">
                            <h4>Narzƒôdzia DM</h4>
                            <p>Checklisty odpraw i pakowania.</p>
                        </div>
                        <div class="dashboard-card" onclick="switchTab('pro-dashboard')" style="border-color: #00d1b2;">
                            <h4>Strefa PRO</h4>
                            <p>Zaawansowane narzƒôdzia techniczne.</p>
                        </div>
                        <div class="dashboard-card" onclick="switchTab('science-of-diving')">
                            <h4>Wiedza</h4>
                            <p>Teoria i wzory nurkowe.</p>
                        </div>

                        <!-- GAME TILE (Mobile Only) -->
                        <div class="dashboard-card" onclick="switchTab('river-dive-game')">
                            <h4>Uki's River Dive</h4>
                            <p>Zagraj w wolnej chwili!</p>
                        </div>

                        <!-- Special Row: Coffee & SOS (Bottom) -->
                        <div class="tile-special-row">
                            <div class="dashboard-card tile-coffee"
                                onclick="window.open('https://suppi.pl/ukidives', '_blank')">
                                <h4 style="color: #4CAF50; text-shadow: 0 0 10px rgba(76, 175, 80, 0.6);">‚òï Postaw Kawƒô
                                </h4>
                                <p>Wsparcie projektu</p>
                            </div>
                            <div class="dashboard-card tile-sos" onclick="if(window.openSOS) window.openSOS()">
                                <h4 style="color: #FF5252; text-shadow: 0 0 10px rgba(255, 82, 82, 0.6);">üö® SOS /
                                    Awaria</h4>
                                <p>Procedury ratunkowe</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="pro-dashboard" class="tab-content">
                    <div class="pro-header">
                        <h3>Strefa Profesjonalisty</h3>
                        <p>Zaawansowane narzƒôdzia dla nurk√≥w technicznych i kadry.</p>
                    </div>

                    <div class="pro-dashboard-wrapper">
                        <div id="pro-overlay-lock" class="pro-lock-overlay">
                            <img src="img/logo.jpg" alt="Logo" class="pro-overlay-logo">
                            <!-- Text Only - Red Uppercase -->
                            <div class="lock-message" style="text-transform: uppercase; letter-spacing: 1px;">
                                FUNKCJE ZABLOKOWANE
                            </div>

                            <div class="pro-features-list"
                                style="text-align: left; margin-bottom: 25px; color: #e0e0e0; font-size: 0.95em;">
                                <p style="margin-bottom: 10px; font-weight: bold; color: #fff;">Otrzymasz dostƒôp do:</p>
                                <ul style="list-style: none; padding: 0; margin: 0; line-height: 1.6;">
                                    <li>‚úÖ <strong>Gas Blender</strong> (Mieszanie parcjalne)</li>
                                    <li>‚úÖ <strong>Trimix Calculator</strong> (He/O2/N2)</li>
                                    <li>‚úÖ <strong>Bailout Planner</strong> (Gazu ucieczkowy)</li>
                                    <li>‚úÖ <strong>Advanced Rock Bottom</strong> (Planowanie)</li>
                                </ul>
                            </div>

                            <!-- Primary Action: Buy Coffee -->
                            <a href="https://suppi.pl/ukidives" target="_blank" rel="noopener noreferrer"
                                class="pulse-button"
                                style="display: flex; align-items: center; justify-content: center; gap: 8px; text-decoration: none; margin-bottom: 20px;">
                                ‚òï POSTAW KAWƒò ABY ODBLOKOWAƒÜ
                            </a>

                            <!-- Secondary Action: Enter Code (Small Link) -->
                            <button class="unlockProButton"
                                style="background: none; border: none; color: #888; text-decoration: underline; font-size: 0.85em; cursor: pointer; padding: 5px;">
                                Masz ju≈º kod? Kliknij tutaj
                            </button>
                        </div>

                        <div id="pro-tools-grid" class="dashboard-grid locked-grid">
                            <div class="dashboard-card" onclick="openProTool('gas-blender')">
                                <h4>Gas Blender</h4>
                                <p>Mieszanie parcjalne (Tlen + Powietrze). Precyzyjne plany top-up.</p>
                            </div>
                            <div class="dashboard-card" onclick="openProTool('trimix-calculator')">
                                <h4>Trimix Calculator</h4>
                                <p>Mieszanie He/O2/N2. Partial pressure blending dla g≈Çƒôbokich nurkowa≈Ñ.</p>
                            </div>
                            <div class="dashboard-card" onclick="openProTool('bailout-calculator')">
                                <h4>Bailout / Ucieczka</h4>
                                <p>Obliczanie gazu na awaryjne wynurzenie (min. Rock Bottom).</p>
                            </div>
                            <div class="dashboard-card" onclick="openProTool('pro-gas-calculator')">
                                <h4>Planowanie + RB</h4>
                                <p>Symulacja zu≈ºycia z automatycznƒÖ rezerwƒÖ na dnie.</p>
                            </div>
                            <div class="dashboard-card disabled-card">
                                <h4>Deco Planner</h4>
                                <p>Algorytm B√ºhlmann ZHL-16C. (Wkr√≥tce)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="gas-blender" class="tab-content pro-tool-view">
                    <button class="back-to-dashboard" onclick="backToDashboard()">Wr√≥ƒá do Strefy PRO</button>
                    <h3>Kalkulator Mieszania (Blender)</h3>
                    <p style="color: #b0b0b0; margin-bottom: 20px; font-size: 0.9em;">Metoda parcjalna: Dodaj Tlen,
                        dope≈Çnij Powietrzem.</p>
                    <form id="blenderForm" class="two-column-form">
                        <div class="form-column">
                            <h4>1. Stan Obecny</h4>
                            <div class="input-group"><label for="blendStartBar">Obecne Ci≈õnienie (bar)</label><input
                                    type="number" id="blendStartBar" value="0" min="0" step="1" required></div>
                            <div class="input-group"><label for="blendStartO2">Obecny % Tlenu</label><input
                                    type="number" id="blendStartO2" value="21" min="0" max="100" step="0.1" required>
                            </div>
                        </div>
                        <div class="form-column">
                            <h4>2. Cel (Target)</h4>
                            <div class="input-group"><label for="blendTargetBar">Ci≈õnienie Docelowe
                                    (bar)</label><input type="number" id="blendTargetBar" value="200" min="0" step="1"
                                    required></div>
                            <div class="input-group"><label for="blendTargetO2">Docelowy % Tlenu</label><input
                                    type="number" id="blendTargetO2" value="32" min="21" max="100" step="0.1" required>
                            </div>
                        </div>
                        <div class="form-full-width">
                            <div class="button-with-tooltip"><span class="tooltip-trigger tooltip-button">?<div
                                        class="tooltip-content">
                                        <h4>Gas Blender (Metoda Parcjalna)</h4>
                                        <p>Obliczamy ci≈õnienia parcjalne gaz√≥w, aby stworzyƒá Nitrox metodƒÖ
                                            "dolewania"
                                            (Top-up).</p>
                                        <ol style="text-align: left; margin-left: 15px;">
                                            <li>Obliczamy, ile czystego tlenu trzeba dodaƒá.</li>
                                            <li>Obliczamy, ile powietrza (21% O2) trzeba dobiƒá.</li>
                                        </ol>
                                    </div></span><button type="submit">Oblicz Mieszankƒô</button></div>
                        </div>
                    </form>
                    <div id="blenderResult" class="result-container"></div>
                </div>

                <div id="trimix-calculator" class="tab-content pro-tool-view">
                    <button class="back-to-dashboard" onclick="backToDashboard()">Wr√≥ƒá do Strefy PRO</button>
                    <h3>Kalkulator Trimix</h3>
                    <p style="color: #b0b0b0; margin-bottom: 20px; font-size: 0.9em;">Partial Pressure Blending: He
                        ‚Üí O2
                        ‚Üí Air (Top-up).</p>
                    <form id="trimixForm" class="two-column-form">
                        <div class="form-column">
                            <h4>1. Parametry Docelowe</h4>
                            <div class="input-group">
                                <label for="trimixTargetO2">Docelowy % Tlenu</label>
                                <input type="number" id="trimixTargetO2" value="21" min="16" max="100" step="0.1"
                                    required>
                            </div>
                            <div class="input-group">
                                <label for="trimixTargetHe">Docelowy % Helu</label>
                                <input type="number" id="trimixTargetHe" value="35" min="0" max="90" step="0.1"
                                    required>
                            </div>
                            <div class="input-group">
                                <label for="trimixTankSize">Pojemno≈õƒá Butli (l)</label>
                                <input type="number" id="trimixTankSize" value="15" min="1" step="1" required>
                            </div>
                        </div>
                        <div class="form-column">
                            <h4>2. Ci≈õnienia</h4>
                            <div class="input-group">
                                <label for="trimixStartBar">Ci≈õnienie PoczƒÖtkowe (bar)</label>
                                <input type="number" id="trimixStartBar" value="0" min="0" step="1" required>
                            </div>
                            <div class="input-group">
                                <label for="trimixTargetBar">Ci≈õnienie Docelowe (bar)</label>
                                <input type="number" id="trimixTargetBar" value="200" min="1" step="1" required>
                            </div>
                        </div>
                        <div class="form-full-width">
                            <div class="button-with-tooltip"><span class="tooltip-trigger tooltip-button">?<div
                                        class="tooltip-content">
                                        <h4>Trimix Blending (Partial Pressure)</h4>
                                        <p>Metoda mieszania parcjalnego dla Trimix:</p>
                                        <ol style="text-align: left; margin-left: 15px;">
                                            <li><strong>Krok 1:</strong> Dodaj hel (100% He) do obliczonego
                                                ci≈õnienia.
                                            </li>
                                            <li><strong>Krok 2:</strong> Dodaj tlen (100% O2) do obliczonego
                                                ci≈õnienia.
                                            </li>
                                            <li><strong>Krok 3:</strong> Dope≈Çnij powietrzem (21% O2) do ci≈õnienia
                                                docelowego.</li>
                                        </ol>
                                        <p><strong>Uwaga:</strong> Kolejno≈õƒá jest kluczowa! He ‚Üí O2 ‚Üí Air</p>
                                    </div></span><button type="submit">Oblicz Mieszankƒô Trimix</button></div>
                        </div>
                    </form>
                    <div id="trimixResult" class="result-container"></div>
                </div>

                <div id="bailout-calculator" class="tab-content pro-tool-view">
                    <button class="back-to-dashboard" onclick="backToDashboard()">Wr√≥ƒá do Strefy PRO</button>
                    <h3>Kalkulator Gazu Ucieczkowego (Bailout)</h3>
                    <form id="bailoutForm" class="two-column-form">
                        <div class="form-column">
                            <div class="input-group"><label for="bailoutSac">SAC w stresie (l/min)</label><input
                                    type="number" id="bailoutSac" value="30" min="10" required></div>
                            <div class="input-group"><label for="bailoutDepth">G≈Çƒôboko≈õƒá Awarii (m)</label><input
                                    type="number" id="bailoutDepth" value="40" min="0" required></div>
                            <div class="input-group">
                                <div class="label-with-tooltip"><label for="bailoutTargetDepth">G≈Çƒôboko≈õƒá Celu
                                        (m)</label><span class="tooltip-trigger">?<div class="tooltip-content">
                                            <p>G≈Çƒôboko≈õƒá, na kt√≥rej prze≈ÇƒÖczasz siƒô na inny gaz (np. EAN50) lub
                                                powierzchnia (0m).</p>
                                        </div></span></div><input type="number" id="bailoutTargetDepth" value="0"
                                    min="0" required>
                            </div>
                        </div>
                        <div class="form-column">
                            <div class="input-group"><label for="bailoutTime">Czas Reakcji (min)</label><input
                                    type="number" id="bailoutTime" value="1" min="0" required></div>
                            <div class="input-group"><label for="bailoutAscentRate">Prƒôdko≈õƒá Wynurzania
                                    (m/min)</label><input type="number" id="bailoutAscentRate" value="10" min="1"
                                    required></div>
                            <div class="input-group"><label for="bailoutTank">Pojemno≈õƒá Butli (l)</label><input
                                    type="number" id="bailoutTank" value="11" min="1" required></div>
                        </div>
                        <div class="form-full-width">
                            <div class="button-with-tooltip"><span class="tooltip-trigger tooltip-button">?<div
                                        class="tooltip-content">
                                        <h4>Co to jest Bailout?</h4>
                                        <p>≈ªelazna rezerwa gazu na sytuacjƒô "worst-case".</p>
                                        <ol style="text-align: left; margin-left: 15px;">
                                            <li><strong>Reakcja na dnie:</strong> RozwiƒÖzanie problemu w stresie.
                                            </li>
                                            <li><strong>Wynurzenie:</strong> Podr√≥≈º do powierzchni.</li>
                                        </ol>
                                    </div></span><button type="submit">Oblicz Bailout</button></div>
                        </div>
                    </form>
                    <div id="bailoutResult" class="result-container"></div>
                </div>

                <div id="pro-gas-calculator" class="tab-content pro-tool-view">
                    <button class="back-to-dashboard" onclick="backToDashboard()">Wr√≥ƒá do Strefy PRO</button>
                    <h3>Planowanie Zu≈ºycia + RB</h3>
                    <p style="color: #b0b0b0; margin-bottom: 20px; font-size: 0.9em;">Symulacja zu≈ºycia z
                        automatycznym
                        wyliczeniem Rock Bottom.</p>
                    <form id="proGasForm" class="two-column-form">
                        <div class="form-column">
                            <div class="input-group"><label for="gcSAC_pro">Tw√≥j SAC (l/min)</label><input type="number"
                                    id="gcSAC_pro" value="20" step="0.1" required></div>
                            <div class="input-group"><label for="gcDepth_pro">Maks. G≈Çƒôboko≈õƒá (m)</label><input
                                    type="number" id="gcDepth_pro" value="30" step="0.1" required></div>
                            <div class="input-group"><label for="gcBottomTime_pro">Czas Denny (min)</label><input
                                    type="number" id="gcBottomTime_pro" value="20" required></div>
                            <div class="input-group"><label>Prƒôdko≈õƒá Zanurzania (m/min)</label><input type="number"
                                    id="gcDescentRate_pro" value="15" required></div>
                            <div class="input-group"><label>Prƒôdko≈õƒá Wynurzania (m/min)</label><input type="number"
                                    id="gcAscentRate_pro" value="10" required></div>
                            <div class="input-group"><label>G≈Çƒôb. Przystanku (m)</label><input type="number"
                                    id="gcStopDepth_pro" value="5" step="0.1" required></div>
                        </div>
                        <div class="form-column">
                            <div class="input-group"><label>Czas Przystanku (min)</label><input type="number"
                                    id="gcStopTime_pro" value="3" required></div>
                            <div class="input-group"><label>Pojemno≈õƒá Butli (l)</label><input type="number"
                                    id="gcTankSize_pro" value="15" step="0.1" required></div>
                            <div class="input-group"><label>Ci≈õnienie start. (bar)</label><input type="number"
                                    id="gcStartPressure_pro" value="200" required></div>
                            <div class="input-group"><label>Mno≈ºnik SAC (Stres)</label><input type="number"
                                    id="rbStressFactor_pro" value="2" step="0.1" required></div>
                            <div class="input-group"><label>Liczba Nurk√≥w (RB)</label><input type="number"
                                    id="rbDivers_pro" value="2" required></div>
                            <div class="input-group"><label>Czas Reakcji (min)</label><input type="number"
                                    id="rbEmergencyTime_pro" value="2" required></div>
                            <div class="input-group"><label>Dodatkowy Bufor (bar)</label><input type="number"
                                    id="rbSafetyMargin_pro" value="10" step="0.1" required></div>
                        </div>
                        <div class="form-full-width">
                            <div class="button-with-tooltip"><span class="tooltip-trigger tooltip-button">?<div
                                        class="tooltip-content">
                                        <h4>Planowanie PRO</h4>
                                        <p>≈ÅƒÖczy obliczenie zu≈ºycia gazu z rezerwƒÖ Rock Bottom.</p>
                                    </div></span><button type="submit">Oblicz Plan + RB</button></div>
                        </div>
                    </form>
                    <div id="proGasResult" class="result-container"></div>
                </div>

                <div id="sac-calculator" class="tab-content">
                    <h3>Kalkulator SAC</h3>
                    <form id="sacForm" class="two-column-form">
                        <div class="form-column">
                            <div class="input-group"><label for="p1">Ci≈õnienie startowe (bar)</label><input
                                    type="number" id="p1" required></div>
                            <div class="input-group"><label for="p2">Ci≈õnienie ko≈Ñcowe (bar)</label><input type="number"
                                    id="p2" required></div>
                            <div class="input-group"><label for="vb">Pojemno≈õƒá butli (l)</label><input type="number"
                                    id="vb" value="15" required></div>
                        </div>
                        <div class="form-column">
                            <div class="input-group"><label for="depth">≈örednia g≈Çƒôboko≈õƒá (m)</label><input
                                    type="number" id="depth" step="0.1" required></div>
                            <div class="input-group"><label for="time">Czas pomiaru (min)</label><input type="number"
                                    id="time" required></div>
                            <div class="input-group"><label for="waterType">Rodaj wody</label><select id="waterType">
                                    <option value="salt">Woda s≈Çona</option>
                                    <option value="fresh" selected>Woda s≈Çodka</option>
                                </select></div>
                        </div>
                        <div class="form-full-width">
                            <div class="button-with-tooltip"><span class="tooltip-trigger tooltip-button">?<div
                                        class="tooltip-content">
                                        <h4>SAC (Surface Air Consumption)</h4>
                                        <p>Powierzchniowe zu≈ºycie gazu. Podstawowy parametr do planowania
                                            nurkowania.
                                        </p>
                                        <p><em>Wz√≥r: (Zu≈ºyty Gaz [l]) / (Ci≈õnienie ≈õr. [ATA] * Czas [min])</em></p>
                                    </div></span><button type="submit">Oblicz SAC</button></div>
                        </div>
                    </form>
                    <div id="sacResult" class="result-container"></div>
                </div>

                <div id="nitrox-calculator" class="tab-content">

                    <!-- Nitrox Audio Lecture -->


                    <nav class="sub-tab-nav">
                        <button class="sub-tab-button active" data-subtab="mod-calculator"
                            title="Maksymalna g≈Çƒôboko≈õƒá">Oblicz MOD</button>
                        <button class="sub-tab-button" data-subtab="ead-calculator" title="R√≥wnowa≈ºna g≈Çƒôboko≈õƒá">Oblicz
                            EAD</button>
                        <button class="sub-tab-button" data-subtab="best-mix-calculator"
                            title="Najlepsza mieszanka">Oblicz Best Mix</button>
                        <button class="sub-tab-button" data-subtab="cns-calculator" title="ObciƒÖ≈ºenie tlenowe">Oblicz
                            CNS%</button>
                    </nav>
                    <div class="input-group"><label for="nitroxO2">Procent tlenu (O‚ÇÇ%)</label><input type="number"
                            id="nitroxO2" value="32" min="21" max="100" required></div>
                    <div class="sub-tab-content-wrapper">
                        <div id="mod-calculator" class="sub-tab-content active-sub-tab">
                            <form id="modForm">
                                <div class="input-group"><label for="modPO2">Ci≈õnienie parcjalne
                                        (PPO‚ÇÇ)</label><input type="number" id="modPO2" value="1.4" step="0.1" min="1.0"
                                        max="1.6" required>
                                </div>
                                <div class="button-with-tooltip"><span class="tooltip-trigger tooltip-button">?<div
                                            class="tooltip-content">
                                            <h4>MOD (Maximum Operating Depth)</h4>
                                            <p>Maksymalna g≈Çƒôboko≈õƒá dla mieszanki i limitu PPO‚ÇÇ.</p>
                                        </div></span><button type="submit">Oblicz MOD</button></div>
                            </form>
                            <div id="modResult" class="result-container"></div>
                        </div>
                        <div id="ead-calculator" class="sub-tab-content">
                            <form id="eadForm">
                                <div class="input-group"><label for="eadDepth">Planowana g≈Çƒôboko≈õƒá (m)</label><input
                                        type="number" id="eadDepth" min="1" required></div>
                                <div class="button-with-tooltip"><span class="tooltip-trigger tooltip-button">?<div
                                            class="tooltip-content">
                                            <h4>EAD (Equivalent Air Depth)</h4>
                                            <p>R√≥wnowa≈ºna G≈Çƒôboko≈õƒá Powietrzna. Pokazuje, jak "g≈Çƒôboko" czuje siƒô
                                                Tw√≥j
                                                organizm pod kƒÖtem nasycenia azotem.</p>
                                        </div></span><button type="submit">Oblicz EAD</button></div>
                            </form>
                            <div id="eadResult" class="result-container"></div>
                        </div>
                        <div id="best-mix-calculator" class="sub-tab-content">
                            <form id="bestMixForm">
                                <div class="input-group"><label for="bestMixDepth">Planowana g≈Çƒôboko≈õƒá
                                        (m)</label><input type="number" id="bestMixDepth" step="0.1" value="30" min="1"
                                        required></div>
                                <div class="input-group"><label for="bestMixPO2">Maksymalne PPO‚ÇÇ (bar)</label><input
                                        type="number" id="bestMixPO2" value="1.4" step="0.1" min="1.0" max="1.6"
                                        required></div>
                                <div class="button-with-tooltip"><span class="tooltip-trigger tooltip-button">?<div
                                            class="tooltip-content">
                                            <h4>Best Mix</h4>
                                            <p>Oblicza "najgorƒôtszƒÖ" (najwy≈ºsze O2) bezpiecznƒÖ mieszankƒô na danƒÖ
                                                g≈Çƒôboko≈õƒá i limit PPO‚ÇÇ.</p>
                                        </div></span><button type="submit">Oblicz Best Mix</button></div>
                            </form>
                            <div id="bestMixResult" class="result-container"></div>
                        </div>
                        <div id="cns-calculator" class="sub-tab-content">
                            <form id="cnsForm">
                                <div class="input-group"><label for="cnsDepth">G≈Çƒôboko≈õƒá (m)</label><input type="number"
                                        id="cnsDepth" step="0.1" value="30" min="1" required></div>
                                <div class="input-group"><label for="cnsTime">Czas na g≈Çƒôboko≈õci (min)</label><input
                                        type="number" id="cnsTime" value="20" min="1" required></div>
                                <div class="button-with-tooltip"><span class="tooltip-trigger tooltip-button">?<div
                                            class="tooltip-content">
                                            <h4>%CNS (Toksyczno≈õƒá Tlenowa)</h4>
                                            <p>Oblicza obciƒÖ≈ºenie O≈õrodkowego Uk≈Çadu Nerwowego tlenem na podstawie
                                                PPO‚ÇÇ
                                                i czasu.</p>
                                        </div></span><button type="submit">Oblicz CNS%</button></div>
                            </form>
                            <div id="cnsResult" class="result-container"></div>
                        </div>
                    </div>
                </div>

                <div id="gas-planning-calculator" class="tab-content">
                    <nav class="sub-tab-nav"><button class="sub-tab-button active" data-subtab="rb-calculator">Rock
                            Bottom (Basic)</button><button class="sub-tab-button"
                            data-subtab="consumption-calculator">Zu≈ºycie Gazu</button></nav>
                    <div class="sub-tab-content-wrapper">
                        <div id="rb-calculator" class="sub-tab-content active-sub-tab">
                            <h3>Kalkulator Rock Bottom (Basic)</h3>
                            <form id="rbForm" class="two-column-form">
                                <div class="form-column">
                                    <div class="input-group"><label for="rbSAC">Tw√≥j SAC (l/min)</label><input
                                            type="number" id="rbSAC" value="20" step="0.1" min="5" required></div>
                                    <div class="input-group"><label for="rbDepth">Maks. G≈Çƒôboko≈õƒá (m)</label><input
                                            type="number" id="rbDepth" value="40" step="0.1" min="1" required></div>
                                    <div class="input-group"><label>Pojemno≈õƒá Butli (l)</label><input type="number"
                                            id="rbVolume" value="24" step="0.1" min="1" required></div>
                                    <div class="input-group"><label>G≈Çƒôb. Przystanku (m)</label><input type="number"
                                            id="rbStopDepth" value="6" step="0.1" min="0" required></div>
                                    <div class="input-group"><label>Prƒôdko≈õƒá Wynurzania (m/min)</label><input
                                            type="number" id="rbAscentRate" value="10" min="1" required></div>
                                </div>
                                <div class="form-column">
                                    <div class="input-group"><label>Mno≈ºnik SAC (Stres)</label><input type="number"
                                            id="rbStressFactor" value="2" step="0.1" min="1" required></div>
                                    <div class="input-group"><label>Liczba Nurk√≥w</label><input type="number"
                                            id="rbDivers" value="2" min="1" max="2" required></div>
                                    <div class="input-group"><label>Czas Reakcji (min)</label><input type="number"
                                            id="rbEmergencyTime" value="2" min="0" required></div>
                                    <div class="input-group"><label>Dodatkowy Bufor (bar)</label><input type="number"
                                            id="rbSafetyMargin" value="10" min="0" required></div>
                                </div>
                                <div class="form-full-width">
                                    <div class="button-with-tooltip"><span class="tooltip-trigger tooltip-button">?
                                            <div class="tooltip-content">
                                                <h4>Rock Bottom (RB)</h4>
                                                <p>Minimalna ilo≈õƒá gazu na bezpieczny powr√≥t we dw√≥jkƒô w razie
                                                    awarii.
                                                </p>
                                            </div>
                                        </span><button type="submit">Oblicz Rock Bottom</button></div>
                                </div>
                            </form>
                            <div id="rbResult" class="result-container"></div>
                        </div>
                        <div id="consumption-calculator" class="sub-tab-content">
                            <h3>Kalkulator Zu≈ºycia Gazu</h3>
                            <form id="gasConsumptionForm" class="two-column-form">
                                <div class="form-column">
                                    <div class="input-group"><label>SAC (l/min)</label><input type="number" id="gcSAC"
                                            value="20" step="0.1" required></div>
                                    <div class="input-group"><label>Maks. G≈Çƒôboko≈õƒá (m)</label><input type="number"
                                            id="gcDepth" value="30" step="0.1" required></div>
                                    <div class="input-group"><label>Czas Denny (min)</label><input type="number"
                                            id="gcBottomTime" value="20" required></div>
                                    <div class="input-group"><label>Prƒôdko≈õƒá Zanurzania (m/min)</label><input
                                            type="number" id="gcDescentRate" value="15" required></div>
                                    <div class="input-group"><label>Prƒôdko≈õƒá Wynurzania (m/min)</label><input
                                            type="number" id="gcAscentRate" value="10" required></div>
                                </div>
                                <div class="form-column">
                                    <div class="input-group"><label>G≈Çƒôb. Przystanku (m)</label><input type="number"
                                            id="gcStopDepth" value="5" step="0.1" required></div>
                                    <div class="input-group"><label>Czas Przystanku (min)</label><input type="number"
                                            id="gcStopTime" value="3" required></div>
                                    <div class="input-group"><label>Pojemno≈õƒá Butli (l)</label><input type="number"
                                            id="gcTankSize" value="15" step="0.1" required></div>
                                    <div class="input-group"><label>Ci≈õnienie start. (bar)</label><input type="number"
                                            id="gcStartPressure" value="200" required></div>
                                    <div class="input-group"><label>Rezerwa (bar)</label><input type="number"
                                            id="gcReserve" value="50" required></div>
                                </div>
                                <div class="form-full-width">
                                    <div class="button-with-tooltip"><span class="tooltip-trigger tooltip-button">?
                                            <div class="tooltip-content">
                                                <h4>Planowanie Zu≈ºycia Gazu</h4>
                                                <p>Symuluje zu≈ºycie gazu w ca≈Çym profilu nurkowym.</p>
                                            </div>
                                        </span><button type="submit">Oblicz Zu≈ºycie</button></div>
                                </div>
                            </form>
                            <div id="gcResult" class="result-container"></div>
                        </div>
                    </div>
                </div>

                <div id="ballast-calculator" class="tab-content">
                    <h3>Kalkulator Balastu</h3>
                    <p style="color: #b0b0b0; margin-top: -10px; margin-bottom: 20px; font-size: 0.9em;">Oblicz
                        sugerowany punkt startowy dla Twojego obciƒÖ≈ºenia.</p>
                    <form id="ballastForm" class="two-column-form">
                        <div class="form-column">
                            <div class="input-group"><label>Waga (kg)</label><input type="number" id="ballastWeight"
                                    value="75" required></div>
                            <div class="input-group"><label>Budowa</label><select id="ballastBodyType" required>
                                    <option value="slim">Szczup≈Ça</option>
                                    <option value="athletic">Atletyczna</option>
                                    <option value="average" selected>≈örednia</option>
                                    <option value="overweight">Nadwaga</option>
                                </select></div>
                            <div class="input-group"><label>Skafander</label><select id="ballastSuit" required>
                                    <option value="foam3">Pianka 3mm</option>
                                    <option value="foam5">Pianka 5mm</option>
                                    <option value="foam7" selected>Pianka 7mm</option>
                                    <option value="dryTri">Suchy (Trylaminat)</option>
                                    <option value="dryCrash">Suchy (Crash Neo)</option>
                                    <option value="dryNeo">Suchy (Neopren)</option>
                                </select></div>
                            <div class="input-group"><label>Dodatki</label><select id="ballastVest">
                                    <option value="none" selected>Brak</option>
                                    <option value="vest">Kamizelka (Docieplenie)</option>
                                </select></div>
                            <div class="input-group" id="ballast-warmer-group"><label>Ocieplacz
                                    (Suchy)</label><select id="ballastWarmer">
                                    <option value="thin" selected>Cienki (do 200g)</option>
                                    <option value="thick">Gruby (400g+)</option>
                                </select></div>
                        </div>
                        <div class="form-column">
                            <div class="input-group"><label>Butla</label><select id="ballastTank" required>
                                    <optgroup label="Pojedyncze (Single)">
                                        <option value="alu11">Alu 11L (S80)</option>
                                        <option value="alu7">Alu 7L</option>
                                        <option value="steel7">Stal 7L (232b)</option>
                                        <option value="steel10">Stal 10L (232b)</option>
                                        <option value="steel10_300">Stal 10L (300b)</option>
                                        <option value="steel12">Stal 12L (232b)</option>
                                        <option value="steel12_300">Stal 12L (300b)</option>
                                        <option value="steel15">Stal 15L (232b)</option>
                                    </optgroup>
                                    <optgroup label="Zestawy (Twin)">
                                        <option value="twin7_232">Twin 2x7L (232b)</option>
                                        <option value="twin7_300">Twin 2x7L (300b)</option>
                                        <option value="twin85_232">Twin 2x8.5L (232b)</option>
                                        <option value="twin85_300">Twin 2x8.5L (300b)</option>
                                        <option value="twin10_232">Twin 2x10L (232b)</option>
                                        <option value="twin10_300">Twin 2x10L (300b)</option>
                                        <option value="twin12_232">Twin 2x12L (232b)</option>
                                        <option value="twin12_300">Twin 2x12L (300b)</option>
                                        <option value="twin15_232">Twin 2x15L (232b)</option>
                                        <option value="twin15_300">Twin 2x15L (300b)</option>
                                    </optgroup>
                                </select></div>
                            <div class="input-group" id="ballast-plate-group" style="display: none;">
                                <label>P≈Çyta</label><select id="ballastPlate">
                                    <option value="alu">Alu</option>
                                    <option value="steel" selected>Stal</option>
                                </select>
                            </div>
                            <div class="input-group"><label>Woda</label><select id="ballastWater" required>
                                    <option value="salt">S≈Çona</option>
                                    <option value="fresh" selected>S≈Çodka</option>
                                </select></div>
                        </div>
                        <div class="form-full-width">
                            <div class="button-with-tooltip"><span class="tooltip-trigger tooltip-button">?<div
                                        class="tooltip-content">
                                        <h4>Kalkulator Balastu</h4>
                                        <p>Pomaga oszacowaƒá potrzebnƒÖ ilo≈õƒá o≈Çowiu. Zawsze wykonaj kontrolƒô
                                            p≈Çywalno≈õci.
                                        </p>
                                    </div></span><button type="submit">Oblicz Sugestiƒô Balastu</button></div>
                        </div>
                    </form>
                    <div id="ballastResult" class="result-container"></div>
                </div>

                <div id="divemaster-tools" class="tab-content">
                    <h3>Narzƒôdzia Divemastera</h3>
                    <nav class="sub-tab-nav"><button class="sub-tab-button active"
                            data-subtab="briefing-checklist">Odprawa</button><button class="sub-tab-button"
                            data-subtab="packing-checklist">Pre-Dive Checklist</button></nav>
                    <div class="global-reset-wrapper"><button id="global-checklist-reset-btn"
                            title="Wyczy≈õƒá aktywnƒÖ listƒô">‚úì Wyczy≈õƒá Listƒô</button></div>
                    <div class="sub-tab-content-wrapper">
                        <div id="briefing-checklist" class="sub-tab-content active-sub-tab">
                            <div class="checklist-group">
                                <h4>I. Wstƒôp i charakterystyka miejsca</h4>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-1"><label
                                        for="brief-cb-1">Przedstawienia i powitanie</label></div>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-2"><label
                                        for="brief-cb-2">Nazwa i opis miejsca</label></div>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-3"><label
                                        for="brief-cb-3">Warunki ≈õrodowiskowe</label></div>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-4"><label
                                        for="brief-cb-4">≈ªycie podwodne i zagro≈ºenia (Mo≈ºliwe spotkania ze
                                        zwierzƒôtami,
                                        ryzyko poparze≈Ñ, skalecze≈Ñ)</label></div>
                            </div>
                            <div class="checklist-group">
                                <h4>II. Plan i parametry nurkowania</h4>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-5"><label
                                        for="brief-cb-5">Cel nurkowania (G≈Ç√≥wny cel i zadania do wykonania)</label>
                                </div>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-6"><label
                                        for="brief-cb-6">Maksymalna g≈Çƒôboko≈õƒá/czas</label></div>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-7"><label
                                        for="brief-cb-7">ZarzƒÖdzanie gazem</label></div>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-8"><label
                                        for="brief-cb-8">Punkt zwrotny/zawracanie (Ci≈õnienie w butli, przy kt√≥rym
                                        zesp√≥≈Ç
                                        rozpoczyna powr√≥t, np. 130 bar)</label></div>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-9"><label
                                        for="brief-cb-9">Tryb nurkowania (Nurkowanie bezdekompresyjne; profil
                                        trapezowy
                                        lub stopniowane wynurzanie ‚Äì unikanie profilu typu "jo-jo")</label></div>
                            </div>
                            <div class="checklist-group">
                                <h4>III. Logistyka i procedury</h4>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-10"><label
                                        for="brief-cb-10">Podzia≈Ç na partner√≥w</label></div>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-11"><label
                                        for="brief-cb-11">Znaki nurkowe</label></div>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-12"><label
                                        for="brief-cb-12">Kontrola sprzƒôtu (Buddy Check) ‚Äì ObowiƒÖzkowe wzajemne
                                        sprawdzenie sprzƒôtu przed wej≈õciem do wody</label></div>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-13"><label
                                        for="brief-cb-13">Wej≈õcie do wody (Wskazanie metody: krok wykroczny,
                                        zsuniƒôcie
                                        siƒô, przewr√≥t w ty≈Ç; maska/automat w ustach, napompowany BCD)</label></div>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-14"><label
                                        for="brief-cb-14">Zanurzanie (Kontrolowane zanurzenie ‚Äì stopami w d√≥≈Ç,
                                        wyr√≥wnywanie ci≈õnienia w uszach i masce, u≈ºycie liny opustowej)</label>
                                </div>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-15"><label
                                        for="brief-cb-15">Wynurzanie i przystanki (Prƒôdko≈õƒá wynurzania < 9 m/min;
                                            obowiƒÖzkowy przystanek bezpiecze≈Ñstwa: 3-5 min na 5 m)</label>
                                </div>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-16"><label
                                        for="brief-cb-16">Wyj≈õcie z wody (Metoda wyj≈õcia ‚Äì np. drabinka, trap;
                                        utrzymywanie dodatniej p≈Çywalno≈õci, maska/automat w ustach)</label></div>
                            </div>
                            <div class="checklist-group">
                                <h4>IV. Bezpiecze≈Ñstwo i awaryjne procedury</h4>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-17"><label
                                        for="brief-cb-17">Procedura rozdzielenia (Zatrzymaj siƒô, rozejrzyj siƒô przez
                                        30
                                        sekund, wynurz siƒô kontrolowanie)</label></div>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-18"><label
                                        for="brief-cb-18">Procedura braku gazu / Out of Air (Podaj g≈Ç√≥wny automat,
                                        u≈ºyj
                                        zapasowego; kontrolowane wynurzenie, u≈ºycie d≈Çugiego wƒô≈ºa)</label></div>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-19"><label
                                        for="brief-cb-19">Odwo≈Çanie nurkowania</label></div>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-20"><label
                                        for="brief-cb-20">Sprzƒôt ratunkowy/medyczny</label></div>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-21"><label
                                        for="brief-cb-21">Odmowa nurkowania (Ka≈ºdy nurek ma prawo zrezygnowaƒá w
                                        dowolnym
                                        momencie bez konsekwencji)</label></div>
                                <div class="checklist-item"><input type="checkbox" id="brief-cb-22"><label
                                        for="brief-cb-22">Ratownik/Asekuracja</label></div>
                            </div>
                        </div>
                        <div id="packing-checklist" class="sub-tab-content">
                            <div class="checklist-group">
                                <h4>I. Sprzƒôt osobisty i termiczny</h4>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-1"><label
                                        for="pack-cb-1">Maska</label></div>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-2"><label
                                        for="pack-cb-2">P≈Çetwy</label></div>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-3"><label
                                        for="pack-cb-3">Buty</label></div>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-4"><label
                                        for="pack-cb-4">Skafander (Pianka/Suchar)</label></div>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-5"><label
                                        for="pack-cb-5">Kaptur</label></div>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-6"><label
                                        for="pack-cb-6">Rƒôkawice</label></div>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-7"><label
                                        for="pack-cb-7">Balast</label></div>
                            </div>
                            <div class="checklist-group">
                                <h4>II. System Dostarczania Powietrza i Wyporno≈õciowy</h4>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-8"><label
                                        for="pack-cb-8">Butla</label></div>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-9"><label
                                        for="pack-cb-9">Automat (I i II stopie≈Ñ)</label></div>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-10"><label
                                        for="pack-cb-10">Manometr (SPG) ‚Äì Sprawdzenie ci≈õnienia</label></div>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-11"><label
                                        for="pack-cb-11">Jacket/Skrzyd≈Ço</label></div>
                            </div>
                            <div class="checklist-group">
                                <h4>III. PrzyrzƒÖdy i wyposa≈ºenie dodatkowe</h4>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-12"><label
                                        for="pack-cb-12">Komputer nurkowy</label></div>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-13"><label
                                        for="pack-cb-13">Kompas</label></div>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-14"><label
                                        for="pack-cb-14">Latarka (G≈Ç√≥wna/Zapasowa) ‚Äì Sprawdzenie, czy ≈õwieci</label>
                                </div>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-15"><label
                                        for="pack-cb-15">Narzƒôdzie tnƒÖce</label></div>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-16"><label
                                        for="pack-cb-16">Boja (SMB) i Ko≈Çowrotek/Szpulka</label></div>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-17"><label
                                        for="pack-cb-17">Tabliczka do pisania</label></div>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-18"><label
                                        for="pack-cb-18">Sprzƒôt zapasowy/Zestaw naprawczy (O-ringi, paski,
                                        podstawowe
                                        narzƒôdzia)</label></div>
                            </div>
                            <div class="checklist-group">
                                <h4>IV. Sprzƒôt ratunkowy</h4>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-19"><label
                                        for="pack-cb-19">Zestaw tlenowy</label></div>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-20"><label
                                        for="pack-cb-20">Apteczka pierwszej pomocy</label></div>
                                <div class="checklist-item"><input type="checkbox" id="pack-cb-21"><label
                                        for="pack-cb-21">Sprzƒôt ≈ÇƒÖczno≈õci (Radio morskie, telefon, GPS)</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="science-of-diving" class="tab-content">
                    <h3>Wiedza Nurkowa</h3>
                    <nav class="sub-tab-nav"><button class="sub-tab-button active"
                            data-subtab="sod-lectures">Wyk≈Çady</button><button class="sub-tab-button"
                            data-subtab="sod-sac">SAC</button><button class="sub-tab-button"
                            data-subtab="sod-nitrox">Nitrox</button><button class="sub-tab-button"
                            data-subtab="sod-gas">Gazy</button><button class="sub-tab-button"
                            data-subtab="sod-ballast">Balast</button></nav>
                    <div class="sub-tab-content-wrapper">

                        <div id="sod-sac" class="sub-tab-content">
                        </div>
                        <div id="sod-nitrox" class="sub-tab-content">
                        </div>
                        <div id="sod-gas" class="sub-tab-content">
                        </div>
                        <div id="sod-ballast" class="sub-tab-content">
                        </div>
                        <div id="sod-lectures" class="sub-tab-content active-sub-tab">
                            <div class="lectures-layout">
                                <div class="lectures-grid-wrapper">
                                    <ul id="lecture-cards" class="cards lectures-grid" aria-live="polite"></ul>
                                </div>
                                <main id="lecture-viewer" class="lecture-viewer" aria-hidden="true">
                                    <div class="lecture-header">
                                        <h2 id="lecture-title">Wybierz wyk≈Çad</h2>
                                        <div class="lecture-controls">
                                            <button id="lecture-back-btn" class="secondary">Powr√≥t</button>
                                        </div>
                                    </div>
                                    <nav id="lecture-toc" class="lecture-toc" aria-hidden="true"></nav>
                                    <article id="lecture-body" class="lecture-body">
                                        <p>Brak wybranego wyk≈Çadu.</p>
                                    </article>
                                </main>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="river-dive-game" class="tab-content game-mode"></div>

                <div id="settings-panel" class="tab-content">
                    <h3>Ustawienia</h3>
                    <div class="settings-toggle-row"><label for="glass-toggle">Efekt Szklany (Liquid
                            Glass)</label><label class="theme-switch" for="glass-toggle"><input type="checkbox"
                                id="glass-toggle" /><span class="slider round"></span></label></div>

                    <div class="settings-toggle-row"><label for="theme-toggle">Tryb Ciemny</label><label
                            class="theme-switch" for="theme-toggle"><input type="checkbox" id="theme-toggle" /><span
                                class="slider round"></span></label></div>

                    <div class="settings-toggle-row"><label for="global-water-type">Domy≈õlny Rodzaj
                            Wody</label><select id="global-water-type" class="settings-select">
                            <option value="fresh">Woda s≈Çodka</option>
                            <option value="salt">Woda s≈Çona</option>
                        </select></div>
                    <h4>Zmie≈Ñ Tapetƒô</h4>
                    <div class="wallpaper-options">
                        <img src="img/bg/background_uki.jpg" class="wallpaper-thumb active"
                            data-wallpaper="url('img/bg/background_uki.jpg')">
                        <img src="img/bg/Gemini_Generated_Image_31b0jp31b0jp31b0 (1).png" class="wallpaper-thumb"
                            data-wallpaper="url('img/bg/Gemini_Generated_Image_31b0jp31b0jp31b0 (1).png')">
                        <img src="img/bg/Gemini_Generated_Image_31b0jp31b0jp31b0 (2).png" class="wallpaper-thumb"
                            data-wallpaper="url('img/bg/Gemini_Generated_Image_31b0jp31b0jp31b0 (2).png')">
                        <img src="img/bg/Generated Image September 22, 2025 - 3_04PM.png" class="wallpaper-thumb"
                            data-wallpaper="url('img/bg/Generated Image September 22, 2025 - 3_04PM.png')">
                    </div>
                    <div class="settings-info-row" style="margin-top: 20px;">
                        <span>Zapisany SAC</span>
                        <div style="display:flex; align-items:center; gap:10px;">
                            <span id="settings-sac-value"
                                style="font-weight: bold; color: var(--primary-color);">Brak</span>
                            <button id="reset-sac-btn" class="icon-btn danger" title="Wyczy≈õƒá zapisany SAC">√ó</button>
                        </div>
                    </div>
                    <div class="settings-info-row" style="margin-top: 5px;">
                        <span>Status Strefy PRO
                            <span class="tooltip-trigger"
                                style="margin-left: 8px; font-size: 0.9em; color: #00d1b2; cursor: help; border: 1px solid #00d1b2; border-radius: 50%; width: 18px; height: 18px; display: inline-flex; align-items: center; justify-content: center; font-weight: bold;">i
                                <div class="tooltip-content" style="width: 250px; text-align: left;">
                                    <p>Aktywno≈õƒá Strefy PRO jest wa≈ºna przez 30 dni.</p>
                                </div>
                            </span>
                        </span>
                        <div style="display:flex; align-items:center; gap:10px;">
                            <span id="pro-status-display" style="font-weight: bold; color: #00d1b2;">Aktywny</span>
                            <button id="reset-pro-btn" class="icon-btn warning"
                                title="Zablokuj ponownie (Test)">üîí</button>
                        </div>
                    </div>

                    <!-- PWA Installation Guide Section -->
                    <div class="install-guide-section" id="settings-pwa-guide">
                        <div class="install-guide-header"
                            onclick="this.classList.toggle('active-header'); document.getElementById('install-guide-content').classList.toggle('expanded'); document.getElementById('guide-toggle-icon').style.transform = document.getElementById('install-guide-content').classList.contains('expanded') ? 'rotate(180deg)' : 'rotate(0deg)'">
                            <h4>üì± Instalacja na iOS / Android</h4>
                            <span id="guide-toggle-icon" class="toggle-icon">‚ñº</span>
                        </div>
                        <div id="install-guide-content" class="install-guide-content">
                            <!-- Standardized Infographic Container -->
                            <img src="img/pwa_install_guide.png" alt="Instrukcja instalacji" class="install-guide-img"
                                style="border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.3);">
                            <p style="font-size: 0.8em; color: #aaa; margin-top: 8px;"><i>Kliknij, aby
                                    powiƒôkszyƒá</i></p>

                            <div class="install-steps-list">
                                <p style="font-weight: bold; color: #fff; margin-bottom: 10px;">iOS (iPhone / iPad) -
                                    Safari:</p>
                                <ol>
                                    <li>Kliknij ikonƒô <strong>Udostƒôpnij</strong> (kwadrat ze strza≈ÇkƒÖ).</li>
                                    <li>Wybierz "<strong>Do ekranu poczƒÖtkowego</strong>".</li>
                                    <li>Kliknij "Dodaj".</li>
                                </ol>
                                <p style="font-weight: bold; color: #fff; margin-bottom: 10px; margin-top: 15px;">
                                    Android - Chrome:</p>
                                <ol>
                                    <li>Kliknij <strong>Menu</strong> (trzy kropki).</li>
                                    <li>Wybierz "<strong>Zainstaluj aplikacjƒô</strong>".</li>
                                    <li>Potwierd≈∫ instalacjƒô.</li>
                                </ol>
                            </div>
                        </div>


                        <div class="settings-info-row" style="margin-top: 25px;">
                            <span>Wersja Aplikacji</span>
                            <span class="app-version-display"
                                style="font-weight: bold; color: var(--primary-color);">Loading...</span>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- Emergency Content Template (Hidden) -->
    <div id="emergency-content" style="display: none;">
        <div class="emergency-modal-content">
            <h2 style="color: #ff4444; margin-bottom: 20px; font-size: 1.3rem; white-space: nowrap;">üö® PROCEDURA
                AWARYJNA üö®</h2>

            <div class="emergency-section">
                <h3>1. OCENA SYTUACJI</h3>
                <ul>
                    <li>Zatrzymaj nurkowanie / Wyjd≈∫ z wody.</li>
                    <li>Podaj tlen 100% (je≈õli dostƒôpny) przy podejrzeniu DCS.</li>
                    <li>Nie podawaj wody nieprzytomnemu.</li>
                </ul>
            </div>

            <div class="emergency-section">
                <h3>2. NUMERY ALARMOWE</h3>
                <div class="emergency-numbers">
                    <p><strong>Europejski Numer Alarmowy:</strong> <a href="tel:112"
                            class="highlight-number flash-danger no-url-style">112</a></p>
                    <p><strong>DAN International:</strong> <a href="tel:+390642115685"
                            class="highlight-number flash-danger no-url-style">+39 06 4211 5685</a></p>
                    <p><strong>Krajowy O≈õrodek Medycyny Hiperbarycznej (Gdynia):</strong> <br><a href="tel:+48586225163"
                            class="highlight-number flash-danger no-url-style">+48 58 622 51 63</a></p>
                </div>
            </div>

            <div class="emergency-section">
                <h3>3. PRZYGOTUJ DANE DLA RATOWNIK√ìW</h3>
                <ul>
                    <li>Profil nurkowania (G≈Çƒôboko≈õƒá, Czas, Gazy).</li>
                    <li>Objawy i czas ich wystƒÖpienia.</li>
                    <li>Komputer nurkowy poszkodowanego (ZABIERZ GO ze sobƒÖ dla lekarzy!).</li>
                </ul>
            </div>

            <div class="emergency-section">
                <h3>4. LOKALIZACJA (GPS)</h3>
                <div style="text-align: center;">
                    <button class="pulse-button gps-locate-btn"
                        style="background: #D32F2F; color: white; font-size: 1.1em; padding: 12px 20px; width: 100%; margin-bottom: 10px; border: 1px solid #ff4444; box-shadow: 0 0 15px rgba(255, 68, 68, 0.6);">
                        POBIERZ MOJƒÑ POZYCJƒò
                    </button>
                    <div class="gps-result" style="font-weight: bold; color: #fff; min-height: 20px;"></div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <p style="font-size: 0.9em; color: #888;">Zachowaj spok√≥j. Twoje dzia≈Çanie mo≈ºe uratowaƒá ≈ºycie.</p>
            </div>
        </div>
    </div>

    <!-- Global Tooltip / Modal Structure -->
    <button id="tiles-mode-home-btn" aria-label="Wr√≥ƒá do menu"></button>
    <div id="tooltip-overlay" style="display: none;"></div>
    <div id="global-tooltip" class="tooltip-content" style="display: none;">
        <button id="tooltip-close-btn">√ó</button>
        <div id="tooltip-body"></div>
    </div>

    <!-- Quiz Modal Structure -->
    <div id="quiz-modal" style="display: none;">
        <div class="quiz-content">
            <!-- Header -->
            <div class="quiz-header">
                <h3>Quiz - Sprawd≈∫ Wiedzƒô</h3>
                <button class="quiz-close-btn" id="quiz-close-btn">√ó</button>
            </div>

            <!-- Body -->
            <div id="quiz-body">
                <!-- Dynamically populated by JS -->
            </div>

            <!-- Result Screen -->
            <div id="quiz-result-screen" style="display: none;">
                <div class="quiz-score-circle" id="quiz-score-circle">0/0</div>
                <h3 id="quiz-result-message">Gratulacje!</h3>
                <button class="retry-button" onclick="restartQuiz()">Spr√≥buj Ponownie</button>
                <button class="pulse-button" onclick="closeQuiz()">Zamknij</button>
            </div>
        </div>
    </div>


    <script type="module" src="src/main.js"></script>
    <script src="src/version_check.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(() => console.log('Service Worker Registered'))
                .catch(err => console.log('SW Registration Failed', err));
        }
    </script>

    <!-- PWA Install Banner -->
    <div id="pwa-install-banner">
        <div class="pwa-banner-content">
            <div class="pwa-icon-container">
                <span class="pwa-icon-inner">üì±</span>
            </div>
            <div class="pwa-text">
                <h4>Zainstaluj na iOS / Android</h4>
                <p>Dzia≈Çaj offline i miej szybki dostƒôp!</p>
            </div>
        </div>

        <!-- Buttons Row -->
        <div class="pwa-banner-actions">
            <!-- Instruction LEFT, Close RIGHT -->
            <button id="pwa-open-guide-btn" class="pwa-btn primary">Instrukcja</button>
            <button id="pwa-limit-banner-btn" class="pwa-btn secondary">Zamknij</button>
        </div>

        <!-- Checkbox Row at BOTTOM -->
        <div class="pwa-checkbox-row">
            <input type="checkbox" id="pwa-dont-show-again">
            <label for="pwa-dont-show-again">Nie pokazuj wiƒôcej</label>
        </div>
    </div>
</body>

</html>